from ccd_dimensions import *

def get_filter_int(filter):
    ordered_filters = {"r":1, "i":2, "u":3, "z":4, "g":5}
    return ordered_filters[filter]

def get_filter_from_int(filterint):
    return ["r", "i", "u", "z", "g"][filterint-1]

    
def convert_ccd2frame(x, y):
    
    res = [0, 0, 0, "nofilter"]
    newx = lambda camcol: \
           x - (camcol-1) * (w_camcol+w_camcol_spacing)
    newy = lambda filter: \
           y - (filter-1) * (h_filter+h_filter_spacing)

    for i in range(1, 7):
        tmp = newx(i)
        if tmp>=0 and tmp<=w_camcol:
            res[0] = tmp
            res[2] = i
            
    for i in range(1, 6):
        tmp = newy(i)
        if tmp>=0 and tmp<=h_filter:
            res[1] = tmp
            res[3] = get_filter_from_int(i)

    return res
            

def convert_frame2ccd(x, y, camcol, filter):
    if isinstance(filter, str):
        filter = get_filter_int(filter)

    newx = x + (camcol-1) * (w_camcol + w_camcol_spacing)
    newy = y + (filter-1) * (h_filter + h_filter_spacing)
    
    return [newx,newy]
